# Реестр претензий

Веб-приложение для управления реестром претензий с возможностью подачи заявок и отправки email-уведомлений.

## Структура проекта

```
reestrpret/
├── public/                 # Основные файлы приложения
│   ├── index.html         # Главная страница
│   ├── app.js            # Основная логика JavaScript
│   ├── styles.css        # Стили CSS
│   ├── date_utils.js     # Утилиты для работы с датами
│   └── send_email_server.py  # Python сервер для отправки email
├── tests/                 # Тесты
├── requirements.txt       # Python зависимости
├── env_example.txt       # Пример конфигурации
└── README.md             # Документация
```

## Установка и запуск

### 1. Настройка Python сервера

```bash
cd reestrpret
pip install -r requirements.txt
```

### 2. Настройка переменных окружения

Создайте файл `.env` на основе `env_example.txt`:

```bash
cp env_example.txt .env
```

Заполните `.env` файл реальными данными:

```env
YANDEX_USER=your_email@yandex.ru
YANDEX_PASSWORD=your_app_password
TO_EMAIL=recipient@example.com
```

**Важно:** Для Yandex используйте пароль приложения, а не основной пароль аккаунта.

### 3. Запуск Python сервера

```bash
cd public
python send_email_server.py
```

Сервер запустится на `http://127.0.0.1:5000`

### 4. Запуск веб-приложения

Откройте `public/index.html` в браузере или используйте локальный сервер:

```bash
cd public
python -m http.server 8000
```

Затем откройте `http://localhost:8000`

## Функциональность

- **Просмотр претензий**: Таблица с возможностью сортировки и фильтрации
- **Подача заявок**: Упрощенная форма для подачи заявок на подготовку претензий
- **Редактирование**: Полная форма для редактирования существующих претензий
- **Экспорт**: Экспорт данных в Excel
- **Email-уведомления**: Автоматическая отправка уведомлений при подаче заявок
- **Фильтрация по годам**: Фильтрация претензий по году

## Технологии

- **Frontend**: HTML5, CSS3, JavaScript (ES6+), jQuery, Bootstrap 5, DataTables
- **Backend**: Python Flask, SMTP для отправки email
- **Хранение данных**: LocalStorage браузера
- **Email**: SMTP через Yandex

## Безопасность

- Учетные данные SMTP хранятся в переменных окружения
- Валидация входных данных на сервере
- CORS настройки для безопасности
- Логирование операций

## Тестирование

```bash
cd tests
python -m pytest test_send_email.py
```

## Устранение неполадок

### Проблемы с отправкой email:
1. Проверьте правильность учетных данных в `.env`
2. Убедитесь, что используется пароль приложения для Yandex
3. Проверьте логи сервера

### Проблемы с отображением:
1. Проверьте консоль браузера на ошибки JavaScript
2. Убедитесь, что все внешние библиотеки загружены
3. Проверьте подключение к Python серверу

## Лицензия

Проект разработан для внутреннего использования.
